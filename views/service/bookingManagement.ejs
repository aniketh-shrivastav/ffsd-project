<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Management</title>
    <link rel="stylesheet" href="/styles/bookingManagement.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <%- include("../partials/serviceHeaders") %>

    <div class="sidebar" id="sidebar">
        <!-- <a href="#" class="close-btn" onclick="toggleSidebar()">&times; Close</a> -->
        <a href="/service/dashboardService"><i class="fas fa-tachometer-alt"></i> </a>
        <a href="/service/profilSettings"><i class="fas fa-user-cog"></i> </a>
        <a href="/service/bookingManagement"><i class="fas fa-calendar-alt"></i> </a>
        <a href="/service/customerCommunication"><i class="fas fa-comments"></i></a>
        <a href="/service/earnings" class="active"><i class="fas fa-money-bill-wave"></i> </a>
        <a href="/service/reviews"><i class="fas fa-star"></i> </a>
    </div>

    <div class="order-container">
        <div class="order-header">
            <button class="tab active">Open</button>
            <button class="tab">Confirmed</button>
            <button class="tab">Ready</button>
            <button class="tab">Rejected</button>
        </div>

        <div class="filter-section">
            <input type="text" id="searchInput" placeholder="Search by Customer ID or Name" class="search-input">
            <select class="dropdown">
                <option>Newest Order Sent</option>
                <option>Oldest Order Sent</option>
            </select>
            <button class="filter-btn">Filter</button>
        </div>

        <table class="order-table">
            <thead>
                <tr>
                    <th></th>
                    <th>Service ID</th>
                    <th>Service</th>
                    <th>Description</th>
                    <th>Car Model</th>
                    <th>Customer Name</th>
                    <th>Customer email</th>
                    <th>Phone Number</th>
                    <th>Address</th>
                    <th>District</th>
                    <th>Status</th>
                    <th>Order Sent</th>
                    <th>Total Cost</th> <!-- üÜï Add this -->
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <% bookings.forEach(order => { %>
                    <tr>
                        <td><input type="checkbox" class="order-checkbox" data-order-id="<%= order._id %>"></td>
                        <td><%= order._id %></td>
                        <td><%= order.selectedServices.join(", ") %></td>
                        <td><%= order.description %></td>
                        <td><%= order.carModel %></td>
                        <td><%= order.customerId.name %></td>
                        <td><%= order.customerId.email %></td>
                        <td><%= order.phone %></td>
                        <td><%= order.address %></td>
                        <td><%= order.district %></td>
                        <td><%= order.status %></td>
                        <td><%= order.createdAt.toLocaleDateString() %></td>
                        <td>‚Çπ<%= order.totalCost %></td>
                        <td>
                            <% if (order.status === 'Confirmed') { %>
                                <button class="btn btn-ready" data-order-id="<%= order._id %>">Mark as Ready</button>
                            <% } else { %>
                                <!-- Optional: show text or leave empty -->
                                <span>‚Äî</span>
                            <% } %>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>

        <div class="action-buttons">
            <button class="confirm-btn">‚úÖ Confirm</button>
            <button class="reject-btn">‚ùå Reject</button>
        </div>
    </div>

    <script src="/scripts/bookingManagement.js"></script>
</body>
</html>