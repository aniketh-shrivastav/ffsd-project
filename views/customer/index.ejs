<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoCustomizer Dashboard</title>
    <link rel="stylesheet" href="/styles/styles.css">
</head>
<body>

    <header>
        <div class="logo">
            <img style="height: 80px;" src="/public/images3/logo2.jpg" alt="AutoCustomizer Logo"> <!-- Fixed path -->
        </div>

        <nav>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/customer/index">Products</a></li>
                <li><a href="/customer/booking">Services</a></li>
                <li><a href="/customer/history">Order History</a></li>
                <li><a href="/customer/payment">Payments</a></li>
                <li><a href="/customer/cart" class="cart-link">
                    <img src="/images/cart-icon.png" alt="Cart"> 
                    <span>Cart</span>
                </a></li>
                <li><a href="/customer/profile">Profile</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="Search for services, car parts...">
        </div>

        <h2>Available Car Parts</h2>
        <div class="parts-list" id="parts-list">
            <% products.forEach(product => { %>
                <div class="part" data-name="<%= product.name %>" data-category="<%= product.category %>">
                    <img src="<%= product.image %>" alt="<%= product.name %>">
                    <p><%= product.name %> - â‚¹<%= product.price %></p>
                    <p class="product-description"><%= product.description %></p>
                    <button class="add-to-cart" data-id="<%= product.id %>" data-name="<%= product.name %>" data-price="<%= product.price %>">Add to Cart</button>
                </div>
            <% }); %>
        </div>
    </main>

    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>Email: support@autocustomizer.com</p>
                <p>Phone: +123-456-7890</p>
                <p>Address: 123 Auto Street, Custom City</p>
            </div>
            <div class="footer-section">
                <h3>Follow Us</h3>
                <div class="social-icons">
                    <a href="#"><img src="/images/facebook-icon.png" alt="Facebook"></a>
                    <a href="#"><img src="/images/twitter-icon.png" alt="Twitter"></a>
                    <a href="#"><img src="/images/instagram-icon.png" alt="Instagram"></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 AutoCustomizer. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Search Filter
            const searchInput = document.getElementById("search-input");
            const parts = document.querySelectorAll(".part");

            function filterParts() {
                const searchValue = searchInput.value.toLowerCase();
                parts.forEach(part => {
                    const partName = part.getAttribute("data-name").toLowerCase();
                    const partCategory = part.getAttribute("data-category").toLowerCase();
                    part.style.display = (partName.includes(searchValue) || partCategory.includes(searchValue)) ? "block" : "none";
                });
            }

            searchInput.addEventListener("input", filterParts);

            // Add to Cart
            const addToCartButtons = document.querySelectorAll(".add-to-cart");

            addToCartButtons.forEach(button => {
                button.addEventListener("click", function () {
                    const id = parseInt(this.getAttribute("data-id"));
                    const name = this.getAttribute("data-name");
                    const price = parseFloat(this.getAttribute("data-price"));
                    const image = this.parentElement.querySelector("img")?.getAttribute("src") || "";

                    let cart = JSON.parse(localStorage.getItem("cart")) || [];

                    const existingItem = cart.find(item => item.id === id);
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        cart.push({ id, name, price, image, quantity: 1 });
                    }

                    localStorage.setItem("cart", JSON.stringify(cart));
                    alert(`${name} added to cart!`);
                });
            });
        });
    </script>

</body>
</html>
